"use strict";(self.webpackChunktea_shop=self.webpackChunktea_shop||[]).push([[422],{2422:(Q,s,i)=>{i.r(s),i.d(s,{OrderModule:()=>J});var p=i(6895),d=i(646),o=i(433),u=i(8256),f=i(529);let m=(()=>{class t{constructor(e){this.http=e}sendOrder(e){return this.http.post("https://testologia.ru/order-tea",e)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(f.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac}),t})();const g=["modal"],_=["modalText"],h=["formButton"];function N(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435"),u.qZA())}function C(t,n){1&t&&(u.TgZ(0,"p"),u._uU(1,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f"),u.qZA())}function Z(t,n){1&t&&(u.TgZ(0,"p"),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u043d\u0430 \u043a\u0438\u0440\u0438\u043b\u0438\u0446\u0435"),u.qZA())}function y(t,n){if(1&t&&(u.TgZ(0,"div",31),u.YNc(1,C,2,0,"p",12),u.YNc(2,Z,2,0,"p",12),u.qZA()),2&t){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.firstName||null==e.firstName.errors?null:e.firstName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.firstName||null==e.firstName.errors?null:e.firstName.errors.pattern)}}function v(t,n){1&t&&(u.TgZ(0,"p"),u._uU(1,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u0444\u0430\u043c\u0438\u043b\u0438\u044e"),u.qZA())}function A(t,n){1&t&&(u.TgZ(0,"p"),u._uU(1,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u043d\u0430 \u043a\u0438\u0440\u0438\u043b\u0438\u0446\u0435"),u.qZA())}function T(t,n){if(1&t&&(u.TgZ(0,"div",31),u.YNc(1,v,2,0,"p",12),u.YNc(2,A,2,0,"p",12),u.qZA()),2&t){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.lastName||null==e.lastName.errors?null:e.lastName.errors.pattern)}}function b(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),u.qZA())}function O(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u043a\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 11 \u0446\u0438\u0444\u0440"),u.qZA())}function q(t,n){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,b,2,0,"p",6),u.YNc(2,O,2,0,"p",6),u.qZA()),2&t){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.pattern)}}function F(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443"),u.qZA())}function I(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0438\u043d\u0434\u0435\u043a\u0441"),u.qZA())}function x(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0418\u043d\u0434\u0435\u043a\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c 6 \u0446\u0438\u0444\u0440"),u.qZA())}function U(t,n){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,I,2,0,"p",6),u.YNc(2,x,2,0,"p",6),u.qZA()),2&t){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.zip||null==e.zip.errors?null:e.zip.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.zip||null==e.zip.errors?null:e.zip.errors.pattern)}}function k(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"),u.qZA())}function B(t,n){1&t&&(u.TgZ(0,"p",31),u._uU(1,"\u0410\u0434\u0440\u0435\u0441 \u0432\u0432\u0435\u0434\u0451\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e"),u.qZA())}function D(t,n){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,k,2,0,"p",6),u.YNc(2,B,2,0,"p",6),u.qZA()),2&t){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.required),u.xp6(1),u.Q6J("ngIf",null==e.address||null==e.address.errors?null:e.address.errors.pattern)}}const E=[{path:"",component:(()=>{class t{constructor(e,r,l,a){this.fb=e,this.activatedRoute=r,this.orderService=l,this.router=a,this.subscriptionQueryParams=null,this.subscriptionOrder=null,this.isProductNameReadonly=!0,this.orderForm=this.fb.group({productName:["",[o.kI.required]],firstName:["",[o.kI.required,o.kI.pattern(/^[\u0410-\u042f\u0401\u0430-\u044f\u0451]{2,}/)]],lastName:["",[o.kI.required,o.kI.pattern(/^[\u0410-\u042f\u0401\u0430-\u044f\u0451]{2,}/)]],phone:["",[o.kI.required,o.kI.pattern(/^(?:\+*\d{1})(?:\(?\d{3}\)?)(?:\d{3})(?:-?\d{2}){2}$/)]],country:["",[o.kI.required,o.kI.pattern(/^[\u0410-\u042f\u0401\u0430-\u044f\u0451]{5,}/)]],zip:["",[o.kI.required,o.kI.pattern(/[0-9]{6}/)]],address:["",[o.kI.required,o.kI.pattern(/^([\u0410-\u042f\u0401\u0430-\u044f\u0451]*\s*[0-9]*\\*\-*\/*\.*)*$/)]],comment:[""]},{validators:o.kI.required}),this.redirectToCatalog=!1}get productName(){return this.orderForm.get("productName")}get firstName(){return this.orderForm.get("firstName")}get lastName(){return this.orderForm.get("lastName")}get phone(){return this.orderForm.get("phone")}get country(){return this.orderForm.get("country")}get zip(){return this.orderForm.get("zip")}get address(){return this.orderForm.get("address")}get comment(){return this.orderForm.get("comment")}ngOnInit(){this.subscriptionQueryParams=this.activatedRoute.queryParams.subscribe(e=>{e.product&&this.orderForm.patchValue({productName:e.product})})}sendForm(){if(this.orderForm.valid){this.formButton.nativeElement.setAttribute("disabled","disabled");const e=this.orderForm.value;this.subscriptionOrder=this.orderService.sendOrder({name:e.firstName||"",last_name:e.lastName||"",phone:e.phone||"",country:e.country||"",zip:e.zip||"",product:e.productName||"",address:e.address||"",comment:e.comment||""}).subscribe({next:r=>{1!==r.success||r.message?(this.modalText.nativeElement.textContent=r?.message,this.redirectToCatalog=!1,this.showModal()):(console.log("\u0437\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d",r),this.modalText.nativeElement.textContent="\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437!",this.redirectToCatalog=!0,this.showModal(),this.orderForm.reset())},error:r=>{this.redirectToCatalog=!1,this.modalText.nativeElement.textContent="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",this.showModal(),console.log(r)}})}else this.firstName?.markAsDirty(),this.lastName?.markAsDirty(),this.phone?.markAsDirty(),this.country?.markAsDirty(),this.zip?.markAsDirty(),this.address?.markAsDirty()}showModal(){this.modal.nativeElement.style.display="flex",this.formButton.nativeElement.removeAttribute("disabled")}closeModal(){this.modal.nativeElement.style.display="none",this.redirectToCatalog&&this.router.navigate(["catalog"])}banLetter(e){e.key&&e.key.match(/^[a-zA-Z\u0410-\u042f\u0451\u0430-\u044f\u0451]$/g)&&e.preventDefault()}ngOnDestroy(){this.subscriptionQueryParams?.unsubscribe(),this.subscriptionOrder?.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(o.qu),u.Y36(d.gz),u.Y36(m),u.Y36(d.F0))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-order"]],viewQuery:function(e,r){if(1&e&&(u.Gf(g,5),u.Gf(_,5),u.Gf(h,5)),2&e){let l;u.iGM(l=u.CRH())&&(r.modal=l.first),u.iGM(l=u.CRH())&&(r.modalText=l.first),u.iGM(l=u.CRH())&&(r.formButton=l.first)}},features:[u._Bn([m])],decls:60,vars:11,consts:[[1,"order","py-4"],[1,"container"],[1,"title","text-center","fw-bold","fs-2","mb-5"],["id","mainForm",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-6","offset-lg-3","form-label"],["type","text","id","productName","formControlName","productName",1,"form-control",3,"readonly"],["class","form-error",4,"ngIf"],[1,"col-12","col-lg-2","offset-lg-3","form-label"],["type","text","id","inputName","formControlName","firstName",1,"form-control"],[1,"col-12","col-lg-2","form-label"],["type","text","id","inputLastName","formControlName","lastName",1,"form-control"],["type","text","id","inputPhone","formControlName","phone",1,"form-control",3,"keydown"],[4,"ngIf"],[1,"col-12","col-lg-3","offset-lg-3","form-label"],["type","text","id","inputCountry","formControlName","country",1,"form-control"],[1,"col-12","col-lg-3","form-label"],["type","text","id","inputIndex","maxlength","6","formControlName","zip",1,"form-control"],["type","text","id","inputAddress","formControlName","address",1,"form-control"],["type","text","id","descriptionOrder","formControlName","comment",1,"form-control"],[1,"col-2","offset-lg-3"],["id","btnForm",1,"btn","btn-primary","hvr-pulse-shrink"],["formButton",""],[1,"order-text","text-center","fs-1","d-none"],[1,"text","text-primary","fw-bold"],[1,"d-block","text-danger"],[1,"modal"],["modal",""],[1,"modal-wrapper"],[1,"modal-text"],["modalText",""],[1,"modal-button",3,"click"],[1,"form-error"]],template:function(e,r){1&e&&(u.TgZ(0,"section",0)(1,"div",1)(2,"h3",2),u._uU(3,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"),u.qZA(),u.TgZ(4,"form",3),u.NdJ("ngSubmit",function(){return r.sendForm()}),u.TgZ(5,"label",4)(6,"span"),u._uU(7,"\u0422\u043e\u0432\u0430\u0440"),u.qZA(),u._UZ(8,"input",5),u.YNc(9,N,2,0,"p",6),u.qZA(),u.TgZ(10,"label",7)(11,"span"),u._uU(12,"\u0418\u043c\u044f"),u.qZA(),u._UZ(13,"input",8),u.YNc(14,y,3,2,"div",6),u.qZA(),u.TgZ(15,"label",9)(16,"span"),u._uU(17,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),u.qZA(),u._UZ(18,"input",10),u.YNc(19,T,3,2,"div",6),u.qZA(),u.TgZ(20,"label",9)(21,"span"),u._uU(22,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),u.qZA(),u.TgZ(23,"input",11),u.NdJ("keydown",function(a){return r.banLetter(a)}),u.qZA(),u.YNc(24,q,3,2,"div",12),u.qZA(),u.TgZ(25,"label",13)(26,"span"),u._uU(27,"\u0421\u0442\u0440\u0430\u043d\u0430"),u.qZA(),u._UZ(28,"input",14),u.YNc(29,F,2,0,"p",6),u.qZA(),u.TgZ(30,"label",15)(31,"span"),u._uU(32,"\u0418\u043d\u0434\u0435\u043a\u0441"),u.qZA(),u._UZ(33,"input",16),u.YNc(34,U,3,2,"div",12),u.qZA(),u.TgZ(35,"label",4)(36,"span"),u._uU(37,"\u0410\u0434\u0440\u0435\u0441"),u.qZA(),u._UZ(38,"input",17),u.YNc(39,D,3,2,"div",12),u.qZA(),u.TgZ(40,"label",4)(41,"span"),u._uU(42,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443"),u.qZA(),u._UZ(43,"textarea",18),u.qZA(),u.TgZ(44,"div",19)(45,"button",20,21),u._uU(47,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "),u.qZA()()(),u.TgZ(48,"div",22)(49,"p",23),u._uU(50,"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437. "),u.TgZ(51,"span",24),u._uU(52,"\u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f!"),u.qZA()()()()(),u.TgZ(53,"div",25,26)(55,"div",27),u._UZ(56,"p",28,29),u.TgZ(58,"button",30),u.NdJ("click",function(){return r.closeModal()}),u._uU(59,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),u.qZA()()()),2&e&&(u.xp6(4),u.Q6J("formGroup",r.orderForm),u.xp6(4),u.ekj("disabled",r.isProductNameReadonly),u.Q6J("readonly",r.isProductNameReadonly),u.xp6(1),u.Q6J("ngIf",(null==r.productName?null:r.productName.invalid)||(null==r.productName||null==r.productName.errors?null:r.productName.errors.required)),u.xp6(5),u.Q6J("ngIf",(null==r.firstName?null:r.firstName.invalid)&&((null==r.firstName?null:r.firstName.touched)||(null==r.firstName?null:r.firstName.dirty))),u.xp6(5),u.Q6J("ngIf",(null==r.lastName?null:r.lastName.invalid)&&((null==r.lastName?null:r.lastName.touched)||(null==r.lastName?null:r.lastName.dirty))),u.xp6(5),u.Q6J("ngIf",(null==r.phone?null:r.phone.invalid)&&((null==r.phone?null:r.phone.touched)||(null==r.phone?null:r.phone.dirty))),u.xp6(5),u.Q6J("ngIf",(null==r.country?null:r.country.invalid)&&((null==r.country?null:r.country.touched)||(null==r.country?null:r.country.dirty))&&((null==r.country||null==r.country.errors?null:r.country.errors.required)||(null==r.country||null==r.country.errors?null:r.country.errors.pattern))),u.xp6(5),u.Q6J("ngIf",(null==r.zip?null:r.zip.invalid)&&((null==r.zip?null:r.zip.touched)||(null==r.zip?null:r.zip.dirty))),u.xp6(5),u.Q6J("ngIf",(null==r.address?null:r.address.invalid)&&((null==r.address?null:r.address.touched)||(null==r.address?null:r.address.dirty))))},dependencies:[p.O5,o._Y,o.Fj,o.JJ,o.JL,o.nD,o.sg,o.u],styles:[".form-error[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-bottom:0;margin-top:5px}input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}.modal[_ngcontent-%COMP%]{position:fixed;display:none;justify-content:center;align-items:center;inset:0;height:100vh;z-index:2;background-color:#00000080}.modal-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:16px;width:300px;box-sizing:border-box;text-align:center;border-radius:15px}.modal-button[_ngcontent-%COMP%]{background-color:#00f;color:#fff;border:none;border-radius:10px;padding:5px 15px}.disabled[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#d3d3d3}"]}),t})()}];let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[d.Bz.forChild(E),d.Bz]}),t})();var z=i(4466);let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[p.ez,o.UX,d.Bz,z.m,c,c]}),t})()}}]);